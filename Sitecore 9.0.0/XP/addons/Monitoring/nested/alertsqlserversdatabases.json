{
	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"actionGroupName": {
			"defaultValue": "[parameters('infrastructure').actionGroupName]",
			"metadata": {
				"description": "The name of the action group to be associated with the alerts actions"
			},
			"type": "string"
		},
		"deploymentId": {
			"type": "string"
		},
		"infrastructure": {
			"defaultValue": {

			},
			"type": "secureObject"
		},
		"omsWorkspaceAlertRecipients": {
			"metadata": {
				"Description": "List of recipients for the email alert separated by semicolon"
			},
			"type": "string"
		},
		"omsWorkspaceName": {
			"defaultValue": "[parameters('infrastructure').omsWorkspaceName]",
			"metadata": {
				"description": "OMS Workspace name."
			},
			"type": "string"
		}
	},
	"resources": [{
			"name": "[concat(parameters('omsWorkspaceName'), '/pnpol')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/pnpol/ciyld')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/pnpol')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/pnpol/ciyld/cudkt')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/pnpol/schedules/ciyld')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-core-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-core-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/hbpcj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/hbpcj/krxka')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/hbpcj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/hbpcj/krxka/vtfqo')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/hbpcj/schedules/krxka')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/apsiy')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/apsiy/ekxnv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/apsiy')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/apsiy/ekxnv/fnqga')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/apsiy/schedules/ekxnv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/zhfsu')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/zhfsu/pfeng')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/zhfsu')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/zhfsu/pfeng/bzuin')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/zhfsu/schedules/pfeng')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qihpc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qihpc/sorxg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qihpc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qihpc/sorxg/chpxv')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qihpc/schedules/sorxg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/stnix')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/stnix/rngdm')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/stnix')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/stnix/rngdm/peznk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/stnix/schedules/rngdm')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-core-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-core-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tmobn')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tmobn/fkqjv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tmobn')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tmobn/fkqjv/qdsdk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tmobn/schedules/fkqjv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-forms-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-forms-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/oldfq')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/oldfq/swzaj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/oldfq')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/oldfq/swzaj/nydsg')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/oldfq/schedules/swzaj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jfjvg')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jfjvg/hbwop')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jfjvg')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jfjvg/hbwop/ggsrj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jfjvg/schedules/hbwop')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/oikpn')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/oikpn/aznmv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/oikpn')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/oikpn/aznmv/qpkjl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/oikpn/schedules/aznmv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lhwkt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lhwkt/hitnz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lhwkt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lhwkt/hitnz/vdlxj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lhwkt/schedules/hitnz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ktagj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ktagj/uodgx')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ktagj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ktagj/uodgx/hnbam')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ktagj/schedules/uodgx')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-forms-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-forms-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/fysnn')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/fysnn/qgndo')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/fysnn')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/fysnn/qgndo/qrayh')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/fysnn/schedules/qgndo')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-ma-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-ma-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kgedz')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kgedz/yiife')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kgedz')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kgedz/yiife/igivk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kgedz/schedules/yiife')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jbdii')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jbdii/qzwjz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jbdii')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jbdii/qzwjz/tnyan')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jbdii/schedules/qzwjz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vdxpr')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vdxpr/aljxw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vdxpr')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vdxpr/aljxw/ljbxs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vdxpr/schedules/aljxw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ypycj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ypycj/iaroj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ypycj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ypycj/iaroj/bwztf')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ypycj/schedules/iaroj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/yojjm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/yojjm/tlduv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/yojjm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/yojjm/tlduv/qmdha')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/yojjm/schedules/tlduv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-ma-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-ma-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ehmts')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ehmts/uaeox')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ehmts')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ehmts/uaeox/rbwlk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ehmts/schedules/uaeox')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-master-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-master-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/yivbp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/yivbp/gvqwz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/yivbp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/yivbp/gvqwz/jgfgz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/yivbp/schedules/gvqwz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cxytp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cxytp/mbkol')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cxytp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cxytp/mbkol/nkeug')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cxytp/schedules/mbkol')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jithl')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jithl/jwful')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jithl')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jithl/jwful/dylnq')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jithl/schedules/jwful')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jsioz')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jsioz/hffiw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jsioz')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jsioz/hffiw/xkbsq')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jsioz/schedules/hffiw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/fekov')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/fekov/kpizt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/fekov')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/fekov/kpizt/mpomk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/fekov/schedules/kpizt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-master-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-master-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/oucmw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/oucmw/rgtbb')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/oucmw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/oucmw/rgtbb/mtacj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/oucmw/schedules/rgtbb')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-pools-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-pools-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/rsapk')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/rsapk/dvxpd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/rsapk')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/rsapk/dvxpd/kxhar')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/rsapk/schedules/dvxpd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/oprbc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/oprbc/qnoka')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/oprbc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/oprbc/qnoka/yutxo')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/oprbc/schedules/qnoka')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/hrxkm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/hrxkm/ixfjt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/hrxkm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/hrxkm/ixfjt/vxqfz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/hrxkm/schedules/ixfjt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/sdzkv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/sdzkv/wishz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/sdzkv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/sdzkv/wishz/curto')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/sdzkv/schedules/wishz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/umboa')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/umboa/svecu')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/umboa')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/umboa/svecu/qfris')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/umboa/schedules/svecu')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-pools-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-pools-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/yaije')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/yaije/yjksy')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/yaije')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/yaije/yjksy/kwhqo')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/yaije/schedules/yjksy')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-refdata-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-refdata-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/sxeyf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/sxeyf/jnapg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/sxeyf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/sxeyf/jnapg/rhdux')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/sxeyf/schedules/jnapg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/eqgjd')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/eqgjd/hjbnx')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/eqgjd')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/eqgjd/hjbnx/oqexl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/eqgjd/schedules/hjbnx')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/syawz')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/syawz/tebbp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/syawz')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/syawz/tebbp/bpihi')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/syawz/schedules/tebbp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/flbxm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/flbxm/rdeqz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/flbxm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/flbxm/rdeqz/ukjzv')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/flbxm/schedules/rdeqz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/zwcyi')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/zwcyi/iwcvt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/zwcyi')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/zwcyi/iwcvt/tyurs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/zwcyi/schedules/iwcvt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-refdata-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-refdata-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jnhro')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jnhro/ymonw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jnhro')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jnhro/ymonw/zayxr')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jnhro/schedules/ymonw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-reporting-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-reporting-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/uqebe')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/uqebe/ynpkp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/uqebe')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/uqebe/ynpkp/blgzm')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/uqebe/schedules/ynpkp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tltiu')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tltiu/ripsh')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tltiu')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tltiu/ripsh/dhxlv')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tltiu/schedules/ripsh')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cdcaw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cdcaw/wlrlc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cdcaw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cdcaw/wlrlc/emvsl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cdcaw/schedules/wlrlc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/pquhw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/pquhw/sgddx')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/pquhw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/pquhw/sgddx/lblga')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/pquhw/schedules/sgddx')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/expts')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/expts/zkqrj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/expts')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/expts/zkqrj/upioc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/expts/schedules/zkqrj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-reporting-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-reporting-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wtooc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wtooc/kfpel')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wtooc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wtooc/kfpel/avmgj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wtooc/schedules/kfpel')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard0-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard0-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/odxmk')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/odxmk/qabku')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/odxmk')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/odxmk/qabku/yuhvs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/odxmk/schedules/qabku')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/medxt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/medxt/ncwjs')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/medxt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/medxt/ncwjs/zcdgo')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/medxt/schedules/ncwjs')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/bcswl')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/bcswl/xusws')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/bcswl')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/bcswl/xusws/ivsts')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/bcswl/schedules/xusws')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nkgof')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nkgof/mjypu')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nkgof')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nkgof/mjypu/hczxc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nkgof/schedules/mjypu')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/xcjju')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/xcjju/wkgoc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/xcjju')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/xcjju/wkgoc/agemt')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/xcjju/schedules/wkgoc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard0-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard0-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/liwne')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/liwne/jeibj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/liwne')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/liwne/jeibj/xqrmu')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/liwne/schedules/jeibj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard1-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard1-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/rvini')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/rvini/ozffl')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/rvini')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/rvini/ozffl/mgahc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/rvini/schedules/ozffl')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gsgqj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gsgqj/qhpui')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gsgqj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gsgqj/qhpui/xnaun')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gsgqj/schedules/qhpui')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ohrmb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ohrmb/rcyiv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ohrmb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ohrmb/rcyiv/fvlde')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ohrmb/schedules/rcyiv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cmedh')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cmedh/csqlr')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cmedh')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cmedh/csqlr/anhli')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cmedh/schedules/csqlr')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ffkxw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ffkxw/ugrdg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ffkxw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ffkxw/ugrdg/ktpix')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ffkxw/schedules/ugrdg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard1-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard1-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/slhap')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/slhap/gsjoy')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/slhap')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/slhap/gsjoy/iaeio')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/slhap/schedules/gsjoy')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-smm-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-smm-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ewxzt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ewxzt/uyois')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ewxzt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ewxzt/uyois/vfzxs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ewxzt/schedules/uyois')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/woqpa')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/woqpa/dscbe')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/woqpa')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/woqpa/dscbe/dgxmu')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/woqpa/schedules/dscbe')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vcirr')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vcirr/ztfjh')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vcirr')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vcirr/ztfjh/dnaru')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vcirr/schedules/ztfjh')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ryepq')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ryepq/bpqmw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ryepq')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ryepq/bpqmw/xwlxi')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ryepq/schedules/bpqmw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lafji')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lafji/bejpp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lafji')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lafji/bejpp/rgaxa')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lafji/schedules/bejpp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-smm-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-smm-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nwcjz')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nwcjz/ymifw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nwcjz')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nwcjz/ymifw/uqtcs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nwcjz/schedules/ymifw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-tasks-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-tasks-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gxpoe')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gxpoe/bolql')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gxpoe')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gxpoe/bolql/jknad')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gxpoe/schedules/bolql')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kzidf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kzidf/xcmjs')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kzidf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kzidf/xcmjs/jexfz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kzidf/schedules/xcmjs')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/jyfdi')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jyfdi/ngqew')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jyfdi')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jyfdi/ngqew/kuvrr')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jyfdi/schedules/ngqew')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/bovzg')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/bovzg/jhiok')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/bovzg')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/bovzg/jhiok/fjstq')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/bovzg/schedules/jhiok')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ghfow')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ghfow/kmzzi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ghfow')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ghfow/kmzzi/akwvi')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ghfow/schedules/kmzzi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-tasks-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-tasks-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/zfzfp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/zfzfp/avinv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/zfzfp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/zfzfp/avinv/bebvs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/zfzfp/schedules/avinv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-web-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-web-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wjyul')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wjyul/fdduf')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wjyul')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wjyul/fdduf/jdosx')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wjyul/schedules/fdduf')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vbsta')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vbsta/ackgp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vbsta')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vbsta/ackgp/rdzbj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vbsta/schedules/ackgp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lkbfh')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lkbfh/maipd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lkbfh')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lkbfh/maipd/dyiub')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lkbfh/schedules/maipd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/afabo')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/afabo/tjemc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/afabo')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/afabo/tjemc/dxhud')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/afabo/schedules/tjemc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kxysc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kxysc/tzpke')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kxysc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kxysc/tzpke/phboc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kxysc/schedules/tzpke')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-web-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-web-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		}
	],
	"variables": {
		"actionGroupResourceId": "[resourceId('Microsoft.Insights/actionGroups',parameters('actionGroupName'))]",
		"alertResourcesApiVersion": "2017-04-26-preview"
	}
}