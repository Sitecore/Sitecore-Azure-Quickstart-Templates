{
	"$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"actionGroupName": {
			"defaultValue": "[parameters('infrastructure').actionGroupName]",
			"metadata": {
				"description": "The name of the action group to be associated with the alerts actions"
			},
			"type": "string"
		},
		"deploymentId": {
			"type": "string"
		},
		"infrastructure": {
			"defaultValue": {

			},
			"type": "secureObject"
		},
		"omsWorkspaceAlertRecipients": {
			"metadata": {
				"Description": "List of recipients for the email alert separated by semicolon"
			},
			"type": "string"
		},
		"omsWorkspaceName": {
			"defaultValue": "[parameters('infrastructure').omsWorkspaceName]",
			"metadata": {
				"description": "OMS Workspace name."
			},
			"type": "string"
		}
	},
	"resources": [{
			"name": "[concat(parameters('omsWorkspaceName'), '/jxdfe')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/jxdfe/pdufn')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/jxdfe')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/jxdfe/pdufn/wyrzn')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/jxdfe/schedules/pdufn')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-core-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-core-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/bphcj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/bphcj/xfqcr')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/bphcj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/bphcj/xfqcr/lthxm')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/bphcj/schedules/xfqcr')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/zprim')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/zprim/bqwem')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/zprim')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/zprim/bqwem/remhz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/zprim/schedules/bqwem')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tgjac')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tgjac/zhiyw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tgjac')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tgjac/zhiyw/gdnua')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tgjac/schedules/zhiyw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lefbs')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lefbs/dkagq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lefbs')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lefbs/dkagq/wncig')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lefbs/schedules/dkagq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-core-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ouwcl')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-core-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-core-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ouwcl/zueaj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ouwcl')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ouwcl/zueaj/hhfkk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ouwcl/schedules/zueaj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-core-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-core-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-core-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tjliv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tjliv/ermhq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tjliv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tjliv/ermhq/ptdko')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tjliv/schedules/ermhq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-exmmaster-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-exmmaster-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/uvqxn')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/uvqxn/vqlsg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/uvqxn')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/uvqxn/vqlsg/whqcy')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/uvqxn/schedules/vqlsg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/iezya')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/iezya/hnffi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/iezya')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/iezya/hnffi/fzitf')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/iezya/schedules/hnffi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lzgsj')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lzgsj/erqno')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lzgsj')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lzgsj/erqno/krogn')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lzgsj/schedules/erqno')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/akmsy')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/akmsy/zjkdr')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/akmsy')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/akmsy/zjkdr/mlhed')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/akmsy/schedules/zjkdr')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-exmmaster-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cgyit')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-exmmaster-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cgyit/sglia')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cgyit')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cgyit/sglia/opeso')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cgyit/schedules/sglia')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-exmmaster-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-exmmaster-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-exmmaster-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/xuofm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/xuofm/dglct')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/xuofm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/xuofm/dglct/duheo')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/xuofm/schedules/dglct')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-forms-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-forms-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wilnb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wilnb/tzsmf')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wilnb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wilnb/tzsmf/wvjzl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wilnb/schedules/tzsmf')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/evvsy')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/evvsy/puffs')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/evvsy')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/evvsy/puffs/mpiyw')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/evvsy/schedules/puffs')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/awbej')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/awbej/myokf')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/awbej')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/awbej/myokf/qbmtg')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/awbej/schedules/myokf')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vgpwd')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vgpwd/dkfaz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vgpwd')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vgpwd/dkfaz/xwkhz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vgpwd/schedules/dkfaz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-forms-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tgvfk')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-forms-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tgvfk/rhsui')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tgvfk')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tgvfk/rhsui/ogxwr')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tgvfk/schedules/rhsui')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-forms-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-forms-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-forms-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/akozy')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/akozy/jxbun')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/akozy')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/akozy/jxbun/clzsy')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/akozy/schedules/jxbun')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-ma-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-ma-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vdhrb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vdhrb/kphoc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vdhrb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vdhrb/kphoc/qugfx')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vdhrb/schedules/kphoc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gicwo')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gicwo/fgvkn')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gicwo')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gicwo/fgvkn/aotge')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gicwo/schedules/fgvkn')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/dhkeb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/dhkeb/etnnq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/dhkeb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/dhkeb/etnnq/hzpbx')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/dhkeb/schedules/etnnq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/syvzt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/syvzt/fpnld')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/syvzt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/syvzt/fpnld/yehgd')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/syvzt/schedules/fpnld')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-ma-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kbdnk')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kbdnk/euxma')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kbdnk')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kbdnk/euxma/uyzck')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kbdnk/schedules/euxma')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-ma-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-ma-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-ma-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ykhmp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ykhmp/fqedp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ykhmp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ykhmp/fqedp/rsvow')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ykhmp/schedules/fqedp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-master-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-master-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/swnuu')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/swnuu/zrazw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/swnuu')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/swnuu/zrazw/siqqc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/swnuu/schedules/zrazw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/bqxgr')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/bqxgr/ioznt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/bqxgr')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/bqxgr/ioznt/qrmfg')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/bqxgr/schedules/ioznt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/holqa')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/holqa/wsuzi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/holqa')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/holqa/wsuzi/fcuqe')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/holqa/schedules/wsuzi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/havcv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/havcv/sjpou')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/havcv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/havcv/sjpou/amgki')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/havcv/schedules/sjpou')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-master-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/zjyhc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-master-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-master-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/zjyhc/kcniz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/zjyhc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/zjyhc/kcniz/spjux')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/zjyhc/schedules/kcniz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-master-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-master-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-master-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/avjct')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/avjct/acpwd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/avjct')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/avjct/acpwd/qodgy')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/avjct/schedules/acpwd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-messaging-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-messaging-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wsdnm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wsdnm/xzvjo')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wsdnm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wsdnm/xzvjo/dwsik')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wsdnm/schedules/xzvjo')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/rmaif')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/rmaif/bgazw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/rmaif')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/rmaif/bgazw/dpjgt')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/rmaif/schedules/bgazw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/xwkya')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/xwkya/wwdfd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/xwkya')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/xwkya/wwdfd/nerds')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/xwkya/schedules/wwdfd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/mpvbt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/mpvbt/adszj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/mpvbt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/mpvbt/adszj/pzbfp')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/mpvbt/schedules/adszj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-messaging-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ytpnz')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-messaging-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ytpnz/zefmp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ytpnz')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ytpnz/zefmp/noygc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ytpnz/schedules/zefmp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-messaging-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-messaging-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-messaging-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/mwclh')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/mwclh/cihst')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/mwclh')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/mwclh/cihst/jxlyb')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/mwclh/schedules/cihst')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-pools-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-pools-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/fggvy')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/fggvy/szrhc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/fggvy')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/fggvy/szrhc/pjlqf')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/fggvy/schedules/szrhc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tavdo')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tavdo/nxugp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tavdo')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tavdo/nxugp/txcmb')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tavdo/schedules/nxugp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qerpb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qerpb/zgxwi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qerpb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qerpb/zgxwi/rodel')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qerpb/schedules/zgxwi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/rhgnb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/rhgnb/rzcfq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/rhgnb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/rhgnb/rzcfq/sijbs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/rhgnb/schedules/rzcfq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-pools-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/tmqxr')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-pools-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/tmqxr/cymzx')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/tmqxr')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/tmqxr/cymzx/yanty')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/tmqxr/schedules/cymzx')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-pools-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-pools-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-pools-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/thybd')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/thybd/wlona')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/thybd')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/thybd/wlona/eiuyl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/thybd/schedules/wlona')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-processingenginestorage-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-processingenginestorage-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ciewv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ciewv/nppnm')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ciewv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ciewv/nppnm/nvoqp')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ciewv/schedules/nppnm')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/upikb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/upikb/zwtbs')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/upikb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/upikb/zwtbs/thugs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/upikb/schedules/zwtbs')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/heebf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/heebf/qabdv')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/heebf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/heebf/qabdv/ywqwk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/heebf/schedules/qabdv')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cfirg')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cfirg/qdarf')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cfirg')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cfirg/qdarf/gvyqa')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cfirg/schedules/qdarf')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ptdca')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginestorage-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ptdca/beubm')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ptdca')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ptdca/beubm/dqkll')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ptdca/schedules/beubm')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginestorage-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-processingenginestorage-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qnewd')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qnewd/rpcvb')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qnewd')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qnewd/rpcvb/ukezk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qnewd/schedules/rpcvb')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-processingenginetasks-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-processingenginetasks-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ssplb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ssplb/fmwbp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ssplb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ssplb/fmwbp/bwxfn')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ssplb/schedules/fmwbp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nksmf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nksmf/oqprk')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nksmf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nksmf/oqprk/rpted')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nksmf/schedules/oqprk')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/vwqfs')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/vwqfs/zqmph')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/vwqfs')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/vwqfs/zqmph/hhobs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/vwqfs/schedules/zqmph')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/foirg')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/foirg/kodsc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/foirg')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/foirg/kodsc/eimun')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/foirg/schedules/kodsc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/esbzp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-processingenginetasks-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/esbzp/iwxie')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/esbzp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/esbzp/iwxie/kjghs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/esbzp/schedules/iwxie')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-processingenginetasks-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-processingenginetasks-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/flqge')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/flqge/sjygq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/flqge')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/flqge/sjygq/wrmzi')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/flqge/schedules/sjygq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-refdata-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-refdata-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wxatx')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wxatx/thpvw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wxatx')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wxatx/thpvw/rmwyf')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wxatx/schedules/thpvw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kistl')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kistl/jbzck')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kistl')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kistl/jbzck/fcqwi')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kistl/schedules/jbzck')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gswnw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gswnw/oaexi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gswnw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gswnw/oaexi/thcql')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gswnw/schedules/oaexi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/mavej')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/mavej/qkhhq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/mavej')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/mavej/qkhhq/jzsxm')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/mavej/schedules/qkhhq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-refdata-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wrleg')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-refdata-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wrleg/vkqhj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wrleg')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wrleg/vkqhj/mhhag')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wrleg/schedules/vkqhj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-refdata-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-refdata-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-refdata-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qxlna')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qxlna/brnhc')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qxlna')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qxlna/brnhc/nubhs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qxlna/schedules/brnhc')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-reporting-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-reporting-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kjrec')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kjrec/rsrlz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kjrec')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kjrec/rsrlz/lsnrj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kjrec/schedules/rsrlz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/twjvs')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/twjvs/hqfzd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/twjvs')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/twjvs/hqfzd/pouzd')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/twjvs/schedules/hqfzd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/xzpao')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/xzpao/znhdy')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/xzpao')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/xzpao/znhdy/fxjbz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/xzpao/schedules/znhdy')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/harjp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/harjp/osjtm')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/harjp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/harjp/osjtm/vovfu')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/harjp/schedules/osjtm')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-reporting-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nxnyh')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-reporting-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nxnyh/udgsp')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nxnyh')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nxnyh/udgsp/stzkv')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nxnyh/schedules/udgsp')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-reporting-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-reporting-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-reporting-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/emhgb')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/emhgb/tomdz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/emhgb')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/emhgb/tomdz/ujsoc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/emhgb/schedules/tomdz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard0-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard0-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/fcayn')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/fcayn/glnvw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/fcayn')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/fcayn/glnvw/rpsbj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/fcayn/schedules/glnvw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/fyoxi')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/fyoxi/retlb')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/fyoxi')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/fyoxi/retlb/ufozz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/fyoxi/schedules/retlb')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/klgxu')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/klgxu/bpeik')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/klgxu')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/klgxu/bpeik/qekkc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/klgxu/schedules/bpeik')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/smnix')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/smnix/stkop')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/smnix')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/smnix/stkop/izjko')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/smnix/schedules/stkop')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard0-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/xwcbt')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard0-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/xwcbt/owmzg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/xwcbt')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/xwcbt/owmzg/qcwec')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/xwcbt/schedules/owmzg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard0-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard0-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard0-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nyijw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nyijw/xjpis')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nyijw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nyijw/xjpis/qisyj')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nyijw/schedules/xjpis')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard1-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard1-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qailv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qailv/kwcux')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qailv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qailv/kwcux/ihmmw')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qailv/schedules/kwcux')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cnifq')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cnifq/vikqz')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cnifq')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cnifq/vikqz/rslkc')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cnifq/schedules/vikqz')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/cssti')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/cssti/euadr')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/cssti')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/cssti/euadr/nejgx')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/cssti/schedules/euadr')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wrsqf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wrsqf/zmdon')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wrsqf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wrsqf/zmdon/eewhu')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wrsqf/schedules/zmdon')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-shard1-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/awlwi')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-shard1-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/awlwi/vhroi')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/awlwi')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/awlwi/vhroi/kdltk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/awlwi/schedules/vhroi')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-shard1-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-shard1-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-shard1-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/kutnw')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/kutnw/ydtpj')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/kutnw')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/kutnw/ydtpj/ojhqx')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/kutnw/schedules/ydtpj')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-smm-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-smm-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/nvmvd')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/nvmvd/uavee')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/nvmvd')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/nvmvd/uavee/prqdz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/nvmvd/schedules/uavee')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/lpzgf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/lpzgf/obnhg')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/lpzgf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/lpzgf/obnhg/mwedr')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/lpzgf/schedules/obnhg')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/uwjrv')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/uwjrv/hewrd')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/uwjrv')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/uwjrv/hewrd/vohsv')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/uwjrv/schedules/hewrd')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gnhub')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gnhub/nwsnq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gnhub')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gnhub/nwsnq/jvckd')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gnhub/schedules/nwsnq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-smm-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/onzja')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-smm-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/onzja/nkoyh')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/onzja')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/onzja/nkoyh/yonmz')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/onzja/schedules/nkoyh')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-smm-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-smm-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-smm-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/dquxx')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/dquxx/ntoaq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/dquxx')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/dquxx/ntoaq/onrpk')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/dquxx/schedules/ntoaq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-tasks-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-tasks-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qsmly')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qsmly/tdhwa')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qsmly')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qsmly/tdhwa/wpdaa')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qsmly/schedules/tdhwa')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/djzrp')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/djzrp/hcmqt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/djzrp')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/djzrp/hcmqt/uadzp')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/djzrp/schedules/hcmqt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/mczdf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/mczdf/vdbnw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/mczdf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/mczdf/vdbnw/lwehr')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/mczdf/schedules/vdbnw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/wkerf')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/wkerf/mnxdt')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/wkerf')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/wkerf/mnxdt/zyivl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/wkerf/schedules/mnxdt')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-tasks-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/mqeko')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-tasks-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/mqeko/iryue')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/mqeko')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/mqeko/iryue/tmycs')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/mqeko/schedules/iryue')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-tasks-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-tasks-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-tasks-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ssqci')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"dtu_consumption_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m)| top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high DTU')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "1"
					},
					{
						"name": "frequency",
						"value": "5"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ssqci/sahqw')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ssqci')]"
				],
				"properties": {
					"etag": "*",
					"interval": "5",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ssqci/sahqw/ajboq')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ssqci/schedules/sahqw')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high DTU')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-web-db','database: Reporting high DTU')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-web-db','database: Reporting high DTU')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/gyapm')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"cpu_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high CPU usage')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "2"
					},
					{
						"name": "frequency",
						"value": "10"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/gyapm/nubuh')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/gyapm')]"
				],
				"properties": {
					"etag": "*",
					"interval": "10",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/gyapm/nubuh/xglao')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/gyapm/schedules/nubuh')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high CPU usage')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' Database: Reporting high CPU usage')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' Database: Reporting high CPU usage')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/uojes')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\"; let metricName =\"storage_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database low storage space')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/uojes/figzq')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/uojes')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/uojes/figzq/tnvju')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/uojes/schedules/figzq')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database low storage space')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting low storage space')]",
						"Severity": "critical",
						"Threshold": {
							"Operator": "gt",
							"Value": "75",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting low storage space')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ustch')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"physical_data_read_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Data IO Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ustch/whrev')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ustch')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ustch/whrev/cpuuy')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ustch/schedules/whrev')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Data IO Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Data IO Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Data IO Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/qqryc')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"log_write_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Resource Utilization')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/qqryc/tordx')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/qqryc')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/qqryc/tordx/vfrhq')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/qqryc/schedules/tordx')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high Resource Utilization')]",
						"Description": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Resource Utilization')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ',parameters('deploymentId'),'-web-db',' database: Reporting high Resource Utilization')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		},
		{
			"name": "[concat(parameters('omsWorkspaceName'), '/ceflo')]",
			"type": "Microsoft.OperationalInsights/workspaces/savedSearches",
			"apiVersion": "[variables('alertResourcesApiVersion')]",
			"tags": {

			},
			"properties": {
				"etag": "*",
				"query": "[concat('let resourceName = \"',parameters('deploymentId'),'-web-db','\";let metricName =\"workers_percent\";let resourceProvider =\"MICROSOFT.SQL\";let resourceIdContains =\"/DATABASES/\";AzureMetrics | where ResourceProvider==resourceProvider and ResourceId contains resourceIdContains and MetricName==metricName and Resource == toupper(resourceName) | summarize AggregatedValue = avg(Maximum) by bin(TimeGenerated, 1m),Resource | top 30 by TimeGenerated')]",
				"displayName": "[concat(parameters('deploymentId'),'-web-db',' database reporting high concurrent requests')]",
				"version": "2.0",
				"category": "AlertIbiza",
				"tags": [{
						"name": "tier",
						"value": "3"
					},
					{
						"name": "frequency",
						"value": "15"
					}
				]
			},
			"resources": [{
				"name": "[Concat(parameters('omsWorkspaceName'),'/ceflo/evbfk')]",
				"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/",
				"apiVersion": "[variables('alertResourcesApiVersion')]",
				"dependsOn": [
					"[Concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'),'/savedSearches/ceflo')]"
				],
				"properties": {
					"etag": "*",
					"interval": "15",
					"queryTimeSpan": "60",
					"enabled": true,
					"NearRealTime": false
				},
				"resources": [{
					"name": "[concat(parameters('omsWorkspaceName'), '/ceflo/evbfk/pyghl')]",
					"type": "Microsoft.OperationalInsights/workspaces/savedSearches/schedules/actions",
					"apiVersion": "[variables('alertResourcesApiVersion')]",
					"dependsOn": [
						"[concat('Microsoft.OperationalInsights/workspaces/',parameters('omsWorkspaceName'),'/savedSearches/ceflo/schedules/evbfk')]"
					],
					"properties": {
						"etag": "*",
						"Type": "Alert",
						"Name": "[concat(parameters('deploymentId'),'-web-db',' database reporting high concurrent requests')]",
						"Description": "[concat('Check ', parameters('deploymentId'),'-web-db',' database: Reporting high concurrent requests')]",
						"Severity": "warning",
						"Threshold": {
							"Operator": "gt",
							"Value": "95",
							"MetricsTrigger": {
								"TriggerCondition": "Total",
								"Operator": "gt",
								"Value": "30"
							}
						},
						"Throttling": {
							"DurationInMinutes": "0"
						},
						"AzNsNotification": {
							"GroupIds": [
								"[variables('actionGroupResourceId')]"
							],
							"CustomEmailSubject": "[concat('Check ', parameters('deploymentId'),'-web-db',' database: Reporting high concurrent requests')]"
						},
						"ScheduleTypeSpecified": false,
						"Version": 2
					}
				}]
			}]
		}
	],
	"variables": {
		"actionGroupResourceId": "[resourceId('Microsoft.Insights/actionGroups',parameters('actionGroupName'))]",
		"alertResourcesApiVersion": "2017-04-26-preview"
	}
}