{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "infrastructure": {
      "type": "secureObject",
      "defaultValue": {}
    },
    "deploymentId": {
      "type": "string"
    },
    "omsWorkspaceName": {
      "type": "string",
      "defaultValue": "[parameters('infrastructure').omsWorkspaceName]",
      "metadata": {
        "description": "OMS Workspace name."
      }
    },
    "omsWorkspaceLocation": {
      "type": "string",
      "defaultValue": "[parameters('infrastructure').omsWorkspaceLocation]",
      "metadata": {
        "description": "the Location in which your OMS will be provisioned"
      }
    },
    "omsWorkspaceAlertRecipients": {
      "type": "string",
      "metadata": {
        "Description": "List of recipients for the email alert separated by semicolon"
      }
    },
    "actionGroupName": {
      "type": "string",
      "defaultValue": "[parameters('infrastructure').actionGroupName]",
      "metadata": {
        "description": "The name of the action group to be associated with the alerts actions"
      }
    },
    "resourceTags": {
      "type": "object"
    }
  },
  "variables": {
    "actionGroupResourceId": "[resourceId('Microsoft.Insights/actionGroups',parameters('actionGroupName'))]",
    "workspaceApiVersion": "2017-04-26-preview",
    "alertResourcesApiVersion": "2018-04-16"
  },
  "resources": [
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cd')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cd')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-cd','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cd')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cm')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cm')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-cm','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cm')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-processing')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-processing')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-cortex-processing','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-processing')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-reporting')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-reporting')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-cortex-reporting','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-cortex-reporting')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-ops')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-ops')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-ops','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-ops')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-rep')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-rep')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-ma-rep','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-ma-rep')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-prc')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-prc')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-prc','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-prc')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-si')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-si')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-si','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-si')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-collect')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-collect')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-xc-collect','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-collect')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-refdata')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-refdata')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-xc-refdata','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-refdata')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    },
    {
      "name": "[concat('WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-search')]",
      "type": "Microsoft.Insights/scheduledqueryrules",
      "apiVersion": "[variables('alertResourcesApiVersion')]",
      "location": "[toLower(replace(parameters('omsWorkspaceLocation'), ' ', ''))]",
      "tags": "[parameters('resourceTags')]",
      "properties": {
        "description": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-search')]",
        "enabled": "true",
        "source": {
          "query": "[concat('let resourceName = \"',parameters('deploymentId'),'-xc-search','\";let metricName =\"Http5xx\";let resourceProvider =\"MICROSOFT.WEB\";let resourceIdContains =\"/SITES/\";AzureMetrics | where ResourceProvider== resourceProvider and ResourceId contains resourceIdContains and MetricName== metricName and Resource == toupper(resourceName)  | top 15 by TimeGenerated| summarize  AggregatedValue = sum(Total) by bin(TimeGenerated, 24h),Resource')]",
          "dataSourceId": "[resourceId('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]",
          "queryType": "ResultCount"
        },
        "schedule": {
          "frequencyInMinutes": "15",
          "timeWindowInMinutes": "60"
        },
        "action": {
          "odata.type": "Microsoft.WindowsAzure.Management.Monitoring.Alerts.Models.Microsoft.AppInsights.Nexus.DataContracts.Resources.ScheduledQueryRules.AlertingAction",
          "severity": "1",
          "throttlingInMin": "479",
          "aznsAction": {
            "actionGroup": [
              "[variables('actionGroupResourceId')]"
            ],
            "emailSubject": "[concat('Check WebApp returning high rate of 5xx errors_', parameters('deploymentId'),'-xc-search')]"
          },
          "trigger": {
            "thresholdOperator": "GreaterThan",
            "threshold": "10",
            "metricTrigger": {
              "thresholdOperator": "GreaterThan",
              "threshold": "0",
              "metricTriggerType": "Total"
            }
          }
        }
      }
    }
  ]
}